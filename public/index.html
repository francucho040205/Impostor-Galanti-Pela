<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>¿Quién es el impostor? - Online</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- FONDO ANIMADO CON VARIAS FOTOS REBOTANDO (con colisiones reales) -->
  <div id="nyancat-bg">
    <img src="/img/foto-fondo.jpg" id="foto-rebotando1" class="foto-rebotando" alt="Fondo animado 1" />
    <img src="/img/foto-fondo2.jpg" id="foto-rebotando2" class="foto-rebotando" alt="Fondo animado 2" />
    <img src="/img/foto-fondo3.jpg" id="foto-rebotando3" class="foto-rebotando" alt="Fondo animado 3" />
    <img src="/img/foto-fondo4.jpg" id="foto-rebotando4" class="foto-rebotando" alt="Fondo animado 4" />
    <img src="/img/foto-fondo5.jpg" id="foto-rebotando5" class="foto-rebotando" alt="Fondo animado 5" />
  </div>
  <div class="topbar">
    <span>Dev by Cancer Team</span>
    <span style="float:right;">v 1.2.2</span>
  </div>
  <div class="center-outer">
    <div class="center-inner" id="app">
      <!-- ... resto del juego ... -->
    </div>
  </div>
  <!-- ... resto del juego y scripts ... -->

  <!-- Script para colisiones y rebote -->
  <script>
  document.addEventListener("DOMContentLoaded", function() {
    const container = document.getElementById('nyancat-bg');
    const images = Array.from(document.querySelectorAll('.foto-rebotando'));

    // Ajusta el tamaño de cada imagen aquí (o usa .naturalWidth/.naturalHeight si lo prefieres)
    const IMG_W = 180;
    const IMG_H = 130;

    // Estado físico de cada imagen
    const balls = images.map((img, i) => ({
      x: Math.random() * (window.innerWidth - IMG_W),
      y: Math.random() * (window.innerHeight - IMG_H),
      vx: (Math.random() * 2 + 1) * (Math.random() < 0.5 ? 1 : -1),
      vy: (Math.random() * 2 + 1) * (Math.random() < 0.5 ? 1 : -1),
      img: img
    }));

    function rectsCollide(a, b) {
      return (
        a.x < b.x + IMG_W &&
        a.x + IMG_W > b.x &&
        a.y < b.y + IMG_H &&
        a.y + IMG_H > b.y
      );
    }

    function resolveCollision(a, b) {
      // Rebote simple: intercambia velocidades
      const tmpVx = a.vx;
      const tmpVy = a.vy;
      a.vx = b.vx;
      a.vy = b.vy;
      b.vx = tmpVx;
      b.vy = tmpVy;

      // Mueve uno un poco para evitar que se queden pegados
      a.x += a.vx;
      a.y += a.vy;
      b.x += b.vx;
      b.y += b.vy;
    }

    function updatePhysics() {
      const W = window.innerWidth, H = window.innerHeight;
      for (let i = 0; i < balls.length; i++) {
        for (let j = i + 1; j < balls.length; j++) {
          let a = balls[i], b = balls[j];
          if (rectsCollide(a, b)) {
            resolveCollision(a, b);
          }
        }
      }
      for (let ball of balls) {
        ball.x += ball.vx;
        ball.y += ball.vy;

        // Colisión con bordes
        if (ball.x < 0) { ball.x = 0; ball.vx *= -1; }
        if (ball.x > W - IMG_W) { ball.x = W - IMG_W; ball.vx *= -1; }
        if (ball.y < 0) { ball.y = 0; ball.vy *= -1; }
        if (ball.y > H - IMG_H) { ball.y = H - IMG_H; ball.vy *= -1; }

        ball.img.style.left = ball.x + "px";
        ball.img.style.top = ball.y + "px";
      }
      requestAnimationFrame(updatePhysics);
    }

    window.addEventListener("resize", () => {
      // Las imágenes siguen rebotando y colisionando en el nuevo tamaño
    });

    updatePhysics();
  });
  </script>
</body>
</html>
